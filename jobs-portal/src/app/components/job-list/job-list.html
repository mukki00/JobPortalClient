<div class="job-list-container">
  <!-- Loading State -->
  <div *ngIf="loading" class="loading-container">
    <div class="loading-spinner"></div>
    <p class="loading-text">Loading jobs...</p>
  </div>

  <!-- Empty State -->
  <div *ngIf="!loading && jobs.length === 0" class="empty-state">
    <div class="empty-icon">üîç</div>
    <h3>No jobs found</h3>
    <p>Try selecting a different category or check back later for new opportunities.</p>
  </div>

  <!-- Job Cards -->
  <div *ngIf="!loading && jobs.length > 0" class="jobs-grid">
    <div *ngFor="let job of jobs" class="job-card" [class.rejected]="isJobRejected(job)">
      <div class="job-header">
        <div class="company-info">
          <div class="company-placeholder">
            {{ job.COMPANY.charAt(0).toUpperCase() }}
          </div>
          <div class="job-basic-info">
            <h3 class="job-title">{{ job.JOB_TITLE }}</h3>
            <p class="company-name">{{ job.COMPANY }}</p>
          </div>
        </div>
        <div class="job-actions">
          <button 
            class="close-button"
            [disabled]="isRejectingJob(job.JOB_ID) || isJobRejected(job)"
            (click)="rejectJob(job)"
            type="button"
            title="Reject this job">
            <svg *ngIf="!isRejectingJob(job.JOB_ID)" width="16" height="16" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2">
              <line x1="18" y1="6" x2="6" y2="18"></line>
              <line x1="6" y1="6" x2="18" y2="18"></line>
            </svg>
            <svg *ngIf="isRejectingJob(job.JOB_ID)" width="16" height="16" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2">
              <path d="M21 12a9 9 0 11-6.219-8.56"/>
            </svg>
          </button>
        </div>
      </div>
      
      <div class="job-meta">
        <span class="job-location">üìç {{ job.COMPANY_LOCATION }}</span>
        <span class="job-category">üè∑Ô∏è {{ job.JOB_CATEGORY }}</span>
        <span class="job-type">{{ job.JOB_TYPE }}</span>
      </div>

      <div class="job-body">
        <div class="job-details">
          <span class="job-source">Source: {{ job.JOB_SOURCE }}</span>
          <span *ngIf="job.LINKEDIN_VERIFIED === 'Y'" class="linkedin-verified">‚úî LinkedIn Verified</span>
        </div>
      </div>

      <div class="job-footer">
        <button class="apply-button" (click)="openJobApplication(job)">
          <span>Apply Now</span>
          <svg width="16" height="16" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2">
            <path d="M7 17l9.2-9.2M17 17V7H7"/>
          </svg>
        </button>
        <button 
          [class]="getAppliedButtonClass(job)"
          [disabled]="isUpdatingJob(job.JOB_ID)"
          (click)="toggleJobApplication(job)"
          type="button">
          <svg *ngIf="job.APPLIED === 'Y'" width="16" height="16" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2">
            <path d="M20 6L9 17l-5-5"/>
          </svg>
          <svg *ngIf="job.APPLIED === 'N' && !isUpdatingJob(job.JOB_ID)" width="16" height="16" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2">
            <circle cx="12" cy="12" r="10"/>
            <path d="M12 6v6l4 2"/>
          </svg>
          <svg *ngIf="isUpdatingJob(job.JOB_ID)" width="16" height="16" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2">
            <path d="M21 12a9 9 0 11-6.219-8.56"/>
          </svg>
          {{ getAppliedButtonText(job) }}
        </button>
      </div>
    </div>
  </div>
</div>
